<?xml version="1.0"?>

<!-- Master config file -->

<PropertyList>

  <config>

    <!-- Aircraft identity information -->
    <identity>
      <make>E-Flite</make>
      <model>Ultra Stick 120</model>
      <serial_number>01</serial_number>
      <call_sign>Balder</call_sign>
    </identity>
    
    <!-- Onboard data logging. -->
    <logging include="comms/log-high-rate.xml">                                 
      <path overlay="true">/root/FlightData</path>
    </logging>

    <!-- Remote operator communication. -->
    <remote_link include="comms/remote-link-3dr.xml" />

    <!-- socket based remote monitoring and control interface -->
    <telnet include="comms/telnet.xml" />

    <!-- Sensor selection and configuration. -->
    <sensors include="sensors/group-APM2.xml">
      <APM2 overlay="true">
        <device overlay="true">/dev/ttyO1</device>
        <pitot_calibrate_factor overlay="true">1.27</pitot_calibrate_factor>
        <volt_divider_ratio overlay="true">15.7</volt_divider_ratio>
	<battery_cells overlay="true">4</battery_cells>
        <external_amp_ratio overlay="true">13.66</external_amp_ratio>
      </APM2>
      <imu_group overlay="true">
        <imu overlay="true">
	  <calibration overlay="true" include="sensors/imu-calibration/apm2_104.xml" />
        </imu>
      </imu_group>
      <airdata_group overlay="true">
	<airdata>
	  <source>raven</source>
	  <device>/dev/ttyO4</device>
	  <!-- <device>/dev/ttyACM0</device> -->
	  <enable type="bool">True</enable>
	</airdata>
      </airdata_group>

    </sensors>

    <!-- Magnetic Declination (Variation) -->
    <!-- You can force a value or specify "auto" to have the system -->
    <!-- compute a magnetic variation based on initial gps location and -->
    <!-- date. -->
    <!-- <magvar-deg>0.827</magvar-deg> --> <!-- @KANE, 01/17/2009 -->
    <magvar_deg>auto</magvar_deg>
      
    <!-- Time in seconds we will project forward on inertials alone after -->
    <!-- losing a gps solution. -->
    <gps_timeout_sec>15.0</gps_timeout_sec>

    <!-- Filters configuration -->
    <filters>
      <!-- <filter include="filters/nav-eigen.xml" /> -->
      <filter include="filters/nav-eigen-mag.xml" />
    </filters>

    <pointing include="pointing.xml" />

    <!-- Autopilot and control configuration. -->
    <autopilot include="autopilots/skywalker.xml" />

    <!-- Primary mission selection and configuration. -->
    <mission include="missions/baldr.xml" />
    <route include="routes/bowtie-300m.xml" />

    <!-- Actuator selection and configuration. -->
    <actuators>
      <actuator include="actuators/APM2-skywalker.xml" />
      <actuator>
	<module>raven</module>
	<enable type="bool">True</enable>
        <channel n="0">
          <input>aileron</input>
          <gain>1.0</gain>
        </channel>
        <channel n="1">
          <input>elevator</input>
          <gain>1.0</gain>
        </channel>
        <channel n="2">
          <input>throttle</input>
          <gain>1.0</gain>
        </channel>
        <channel n="3">
          <input>rudder</input>
          <gain>1.0</gain>
        </channel>
      </actuator>
    </actuators>

  </config>

</PropertyList>
