<?xml version="1.0"?>

<PropertyList>

  <enable type="bool">true</enable>

  <!-- global tasks: each of these are run every iteration -->
  <global_tasks>
    <task>
      <name>home_manager</name>
    </task>

    <task>
      <name>lost_link</name>
      <timeout_sec>90</timeout_sec>
      <push_task_if_airborne>circle_coord</push_task_if_airborne>
      <airborne_flag>/mission/is_airborne</airborne_flag>
    </task>

    <task>
      <name>throttle_safety</name>
      <!-- safety "off" means throttle can run -->
      <off_alt_agl_ft>10</off_alt_agl_ft>
      <off_airspeed_kt>15</off_airspeed_kt>
      <!-- safety "on" means throttle cannot run -->
      <on_alt_agl_ft>30</on_alt_agl_ft>
      <on_airspeed_kt>10</on_airspeed_kt>
    </task>

    <task>
      <name>is_airborne</name>
      <!-- "off" in the sense of "off" the ground if we exceed these values -->
      <off_alt_agl_ft>10</off_alt_agl_ft>
      <off_ground_speed_kt>10</off_ground_speed_kt>
      <off_air_speed_kt>15</off_air_speed_kt>
      <!-- "on" the ground if we drop below these values-->
      <on_ground_speed_kt>5</on_ground_speed_kt>
      <on_air_speed_kt>10</on_air_speed_kt>
    </task>
  </global_tasks>

  <!-- sequential tasks: only the front item in the fifo queue is run -->
  <sequential_tasks>
    <task>
      <name>launch</name>
      <pitch_deg>12</pitch_deg>
      <speed_kts>40</speed_kts>
      <completion_alt_ft>200</completion_alt_ft>
    </task>

    <task>
      <name>route</name>
      <route include="../routes/bowtie-300m.xml" />
      <timed>0</timed>
      <loop>0</loop>
    </task>
  </sequential_tasks>

  <!-- standby tasks: a list of tasks that are initialized and configured -->
  <!-- and could be moved to the global or sequential task lists at any -->
  <!-- time. -->
  <standby_tasks>
    <task>
      <name>circle_coord</name>
      <config>/mission/startup</config>

      <bank_deg>20</bank_deg>
      <bank_limit_deg>30</bank_limit_deg>
      <heading_error_gain>0.8</heading_error_gain>

      <altitude_agl_ft>500</altitude_agl_ft>
      <speed_kt>30</speed_kt>
    </task>
  </standby_tasks>

</PropertyList>
