<?xml version="1.0"?>

<PropertyList>

  <APM2>
    <device>/dev/ttyO0</device>
    <baud>115200</baud>

    <!-- This is the signal generation rate for driving external servos. -->
    <!-- 50 is the value for standard analog servos -->
    <!-- 400 is the value for good digital servos -->
    <pwm-hz>50</pwm-hz>

    <!-- multiplier to convert from the raw analog voltage to actual -->
    <!-- external voltage. -->
    <!-- 4.127 is the proper value for the AttoPilot 45A (13.6V) sensor -->
    <!-- 15.700 is the proper value for the AttoPilot 50V/90A sensor -->
    <!-- 15.901 is the estimated value for the Avior rev3-->
    <volt-divider-ratio> 4.127</volt-divider-ratio>
    <!-- <volt-divider-ratio> 16.282</volt-divider-ratio> -->

    <!-- used to unambiguously determine per-cell voltage -->
    <battery-cells>4</battery-cells>

    <!-- this is a calibration offset which is subtracted from the analog -->
    <!-- voltage if it's non zero for a zero current draw (not a likely -->
    <!-- scenario in with the APM25 -->
    <external-amp-offset>0.0</external-amp-offset>

    <!-- multiplier to convert from the raw analog voltage to actual -->
    <!-- amps. -->
    <!-- 13.66 is the proper value for the AttoPilot 45A (13.6V) sensor -->
    <!-- 27.32 is the proper value for the AttoPilot 50V/90A sensor -->
    <!-- 14.50 aligns better with my "watts up" numbers -->                    
    <!-- 15.00 calibrates better with what my battery charger -->
    <!-- 38.14 estimate for Avior-rev3 -->
    <external-amp-ratio>15.00</external-amp-ratio>
    <!-- <external-amp-ratio>38.14</external-amp-ratio> -->

    <!-- Pitot tube calibration factor, probably should leave this as 1.0 -->
    <!-- and override it with a per-aircraft value in the top level main.xml -->
    <pitot-calibrate-factor>1.0</pitot-calibrate-factor>
  </APM2>

  <imu-group>
    <imu>
      <source>APM2</source>
      <enable type="bool">true</enable>
      <calibration>
	<min-temp-C>23.9</min-temp-C>
	<max-temp-C>30.1</max-temp-C>
	<p>
	  <bias>0.00006423 -0.00455176 0.12463765</bias>
	  <scale>1.0</scale>
	</p>
	<q>
	  <bias>0.00000218 -0.00033037 0.02536234</bias>
	  <scale>1.0</scale>
	</q>
	<r>
	  <bias>-0.00003836 0.00201130 -0.02027006</bias>
	  <scale>1.0</scale>
	</r>
	<ax>
	  <bias>0.00194491 -0.10401788 1.22807999</bias>
	  <scale>1.0</scale>
	</ax>
	<ay>
	  <bias>0.00546314 -0.30630167 3.86812605</bias>
	  <scale>1.0</scale>
	</ay>
	<az>
	  <bias>0.00215265 -0.11316398 2.66161124</bias>
	  <scale>1.0</scale>
	</az>
      </calibration>
    </imu>
  </imu-group>

  <gps-group>
    <gps>
      <source>APM2</source>
      <enable type="bool">true</enable>
    </gps>
  </gps-group>

  <airdata-group>
    <airdata>
      <source>APM2</source>
      <enable type="bool">true</enable>
    </airdata>
  </airdata-group>

  <pilot-inputs>
    <pilot-input>
      <source>APM2</source>
      <enable type="bool">true</enable>
    </pilot-input>
  </pilot-inputs>

</PropertyList>

